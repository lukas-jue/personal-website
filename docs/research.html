<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lukas Jürgensmeier - Research</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SRCXLB0QJK"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SRCXLB0QJK', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Lukas Jürgensmeier">
<meta property="og:description" content="Lukas Jürgensmeier is a Ph.D.&nbsp;Student and Research Assistant in Quantitative Marketing at Goethe University Frankfurt. His research focuses on the interface between Data Science and Marketing. Lukas applies modern econometric methods to novel data sources in the digital economy—especially with the R programming language.">
<meta property="og:site-name" content="Lukas Jürgensmeier">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Lukas Jürgensmeier</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./research.html" rel="" target="" aria-current="page">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./curriculum-vitae.html" rel="" target="">
 <span class="menu-text">Curriculum Vitae</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./techacademy.html" rel="" target="">
 <span class="menu-text">TechAcademy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contact.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#developed-research-with-working-papers" id="toc-developed-research-with-working-papers" class="nav-link active" data-scroll-target="#developed-research-with-working-papers">Developed Research with Working Papers</a>
  <ul class="collapse">
  <li><a href="#measuring-fair-competition-on-digital-platforms" id="toc-measuring-fair-competition-on-digital-platforms" class="nav-link" data-scroll-target="#measuring-fair-competition-on-digital-platforms">Measuring Fair Competition on Digital Platforms</a>
  <ul class="collapse">
  <li><a href="#abstract" id="toc-abstract" class="nav-link" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#conference-presentations" id="toc-conference-presentations" class="nav-link" data-scroll-target="#conference-presentations">Conference Presentations</a></li>
  <li><a href="#funding" id="toc-funding" class="nav-link" data-scroll-target="#funding">Funding</a></li>
  </ul></li>
  <li><a href="#do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations" id="toc-do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations" class="nav-link" data-scroll-target="#do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations">Do Political Conflicts Influence Daily Consumption Choices? Evidence from US-China Relations</a>
  <ul class="collapse">
  <li><a href="#abstract-1" id="toc-abstract-1" class="nav-link" data-scroll-target="#abstract-1">Abstract</a></li>
  <li><a href="#conference-presentations-1" id="toc-conference-presentations-1" class="nav-link" data-scroll-target="#conference-presentations-1">Conference Presentations</a></li>
  <li><a href="#funding-1" id="toc-funding-1" class="nav-link" data-scroll-target="#funding-1">Funding</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#early-stage-research-without-working-paper" id="toc-early-stage-research-without-working-paper" class="nav-link" data-scroll-target="#early-stage-research-without-working-paper">Early-Stage Research Without Working Paper</a>
  <ul class="collapse">
  <li><a href="#using-generative-ai-to-provide-scalable-feedback-to-students-in-marketing-analytics" id="toc-using-generative-ai-to-provide-scalable-feedback-to-students-in-marketing-analytics" class="nav-link" data-scroll-target="#using-generative-ai-to-provide-scalable-feedback-to-students-in-marketing-analytics">Using Generative AI to Provide Scalable Feedback to Students in Marketing Analytics</a>
  <ul class="collapse">
  <li><a href="#abstract-2" id="toc-abstract-2" class="nav-link" data-scroll-target="#abstract-2">Abstract</a></li>
  </ul></li>
  <li><a href="#degrees-of-vertical-integration-on-online-retail-platforms-an-international-comparison-of-amazon-marketplaces" id="toc-degrees-of-vertical-integration-on-online-retail-platforms-an-international-comparison-of-amazon-marketplaces" class="nav-link" data-scroll-target="#degrees-of-vertical-integration-on-online-retail-platforms-an-international-comparison-of-amazon-marketplaces">Degrees of Vertical Integration on Online Retail Platforms: An International Comparison of Amazon Marketplaces</a></li>
  </ul></li>
  <li><a href="#other-projects" id="toc-other-projects" class="nav-link" data-scroll-target="#other-projects">Other Projects</a>
  <ul class="collapse">
  <li><a href="#teaching-marketing-analytics-a-pricing-exercise-for-quantitative-and-substantive-marketing-skills" id="toc-teaching-marketing-analytics-a-pricing-exercise-for-quantitative-and-substantive-marketing-skills" class="nav-link" data-scroll-target="#teaching-marketing-analytics-a-pricing-exercise-for-quantitative-and-substantive-marketing-skills">Teaching Marketing Analytics: A Pricing Exercise for Quantitative and Substantive Marketing Skills</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/lukas-jue/personal-website/edit/main/research.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/lukas-jue/personal-website/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Research</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>My research investigates economic phenomena in the digital economy. I do so using novel big data sources and applying modern statistical methods.</p>
<p>On this website, you will find a summary of my current research projects that use search engine and Amazon product data to assess <a href="./research.html#measuring-fair-competition-on-digital-platforms">fair competition on digital platforms</a>, as well as smartphone location data and large amounts of unstructured newspaper articles to estimate the <a href="./research.html#do-political-conflicts-influence-daily-consumption-choices">effect of political conflict on consumption</a>.</p>
<section id="developed-research-with-working-papers" class="level1">
<h1>Developed Research with Working Papers</h1>
<section id="measuring-fair-competition-on-digital-platforms" class="level2">
<h2 class="anchored" data-anchor-id="measuring-fair-competition-on-digital-platforms">Measuring Fair Competition on Digital Platforms</h2>
<p><em>Authors:</em> Lukas Jürgensmeier and <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a></p>
<p><em>Status:</em> Revise &amp; Resubmit (third round) at the Journal of Marketing</p>
<p>Read the full working paper on <a href="https://papers.ssrn.com/abstract_id=4393726">SSRN</a>.</p>
<section id="abstract" class="level3">
<h3 class="anchored" data-anchor-id="abstract">Abstract</h3>
<p>Digital platforms use recommendations to facilitate the exchange between platform actors, such as trade between buyers and sellers. Platform actors expect, and legislators increasingly require that competition, including recommendations, are fair—especially for a market-dominating platform on which self-preferencing could occur. However, testing for fairness on platforms is challenging because offers from competing platform actors usually differ in their attributes, and many distinct fairness definitions exist. This article considers these challenges, develops a five-step approach to measure fair competition through recommendations on digital platforms, and illustrates this approach by conducting two empirical studies. These studies examine Amazon’s search engine recommendations on the Amazon marketplace for more than a million daily observations from three countries. They find no consistent evidence for unfair competition through search engine recommendations. The article also discusses applying the five-step approach in other settings to ensure compliance with new regulations governing fair competition on digital platforms, such as the Digital Markets Act in the European Union or the proposed American Innovation and Choice Online Act in the United States.</p>
<p><strong>Keywords:</strong> Digital Platforms, Amazon, Competition, Fairness, Antitrust, Search Engines, Digital Markets Act, American Innovation and Choice Online Act.</p>
</section>
<section id="conference-presentations" class="level3">
<h3 class="anchored" data-anchor-id="conference-presentations">Conference Presentations</h3>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Conference</th>
<th>Date</th>
<th>Location</th>
<th>Presenting Author</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>17th Symposium on Statistical Challenges in Electronic Commerce Research (SCECR 2021)</td>
<td>June 2021</td>
<td><p><del>Madrid, Spain</del></p>
<p>online</p></td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="even">
<td>Interactive Marketing Research Conference (IMRC 2021)</td>
<td>October 2021</td>
<td><p><del>Gabelli School of Business, Fordham University, New York City, United States</del></p>
<p>online</p></td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>13th Paris Conference on Digital Economics 2022</td>
<td>April 2022</td>
<td>Télécom Paris, Paliseau, France</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="even">
<td>EMAC Doctoral Colloquium 2022</td>
<td>May 2022</td>
<td>Corvinus University, Budapest, Hungary</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>EMAC Annual Conference 2022</td>
<td>May 2022</td>
<td>Corvinus University, Budapest,</td>
<td>Bernd Skiera</td>
</tr>
<tr class="even">
<td>Munich Summer Institute 2022</td>
<td>June 2022</td>
<td>Bavarian Academy of Sciences and Humanities, Munich, Germany</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>ISMS Marketing Science Conference 2022</td>
<td>June 2022</td>
<td><p>~ ~University of Chicago Booth School of Business, United States~~</p>
<p>online</p></td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="even">
<td>20th ZEW Conference on the Economics of Information and Communication Technologies</td>
<td>July 2022</td>
<td>ZEW — Leibniz Centre for European Economic Research, Mannheim, Germany</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>SALTY 2022 — Quantitative Marketing Conference</td>
<td>September 2022</td>
<td>WHU — Otto Beisheim School of Management, Düsseldorf, Germany</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="even">
<td>WISE 2022 — Workshop on Information Systems in Economics</td>
<td>December 2022</td>
<td>Copenhagen Business School, Copenhagen, Denmark</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>ISMS Marketing Science Conference 2023 (special session for winners of the <em>2022 ISMS Doctoral Dissertation Proposal Competition</em>)</td>
<td>June 2023</td>
<td>Miami, United States</td>
<td>Lukas Jürgensmeier</td>
</tr>
</tbody>
</table>
</section>
<section id="funding" class="level3">
<h3 class="anchored" data-anchor-id="funding">Funding</h3>
<p>This project is funded by the German Research Foundation (<a href="https://www.dfg.de/en/index.jsp">Deutsche Forschungsgemeinschaft—DFG</a>) through grant number SK 66/8-1 within the project <em>Visibility in Digital Markets: Risks and Economic Consequences</em>.</p>
</section>
</section>
<section id="do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations" class="level2">
<h2 class="anchored" data-anchor-id="do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations">Do Political Conflicts Influence Daily Consumption Choices? Evidence from US-China Relations</h2>
<p><em>Authors:</em> <a href="https://www.celinaproffen.com/">Celina Proffen</a> and Lukas Jürgensmeier (equal co-authorship)</p>
<p><em>Status:</em> Under Review at the Journal of Economic Behavior and Organization</p>
<p>Read the full working paper on <a href="https://papers.ssrn.com/abstract_id=4402601">SSRN</a>.</p>
<section id="abstract-1" class="level3">
<h3 class="anchored" data-anchor-id="abstract-1">Abstract</h3>
<p>Does political conflict with a foreign country influence domestic consumers’ daily consumption choices? This study exploits the volatile US-China relations in 2018 and 2019 to analyze whether US consumers reduce their visits to Chinese restaurants when bilateral relations deteriorate. We measure the degree of political conflict through negativity in media reports and rely on smartphone location data to measure daily visits to over 190,000 US restaurants. A deterioration in US-China relations induces a significant decline in visits to Chinese restaurants, while visits to American restaurants increase. We identify consumers’ age, race, and cultural openness to mediate the strength of this effect.</p>
</section>
<section id="conference-presentations-1" class="level3">
<h3 class="anchored" data-anchor-id="conference-presentations-1">Conference Presentations</h3>
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 22%">
<col style="width: 22%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Conference</th>
<th>Date</th>
<th>Location</th>
<th>Presenting Author</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>EMAC Doctoral Colloquium 2022</td>
<td>May 2022</td>
<td>Corvinus University, Budapest, Hungary</td>
<td>Celina Proffen</td>
</tr>
<tr class="even">
<td>EMAC Annual Conference 2022</td>
<td>May 2022</td>
<td>Corvinus University, Budapest, Hungary</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>VfS Annual Conference 2022</td>
<td>September 2022</td>
<td>University of Basel, Switzerland</td>
<td>Celina Proffen</td>
</tr>
<tr class="even">
<td>Economics of Media Workshop: Industrial Organization meets Political Economy</td>
<td>eSeptember 2022</td>
<td>Smith School of Business, Queen’s University, Kingston, ON, Canada</td>
<td>Lukas Jürgensmeier</td>
</tr>
<tr class="odd">
<td>efl — the Data Science Institute, Jour Fixe</td>
<td>January 2023</td>
<td>Frankfurt, Germany</td>
<td>Celina Proffen</td>
</tr>
</tbody>
</table>
</section>
<section id="funding-1" class="level3">
<h3 class="anchored" data-anchor-id="funding-1">Funding</h3>
<p>This project is funded by the efl – the Data Science Institute.</p>
</section>
</section>
</section>
<section id="early-stage-research-without-working-paper" class="level1">
<h1>Early-Stage Research Without Working Paper</h1>
<section id="using-generative-ai-to-provide-scalable-feedback-to-students-in-marketing-analytics" class="level2">
<h2 class="anchored" data-anchor-id="using-generative-ai-to-provide-scalable-feedback-to-students-in-marketing-analytics">Using Generative AI to Provide Scalable Feedback to Students in Marketing Analytics</h2>
<p><em>Authors:</em> Lukas Jürgensmeier and <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a></p>
<p><em>Status:</em> In progress, initial draft of working paper estimated January 2024.</p>
<section id="abstract-2" class="level3">
<h3 class="anchored" data-anchor-id="abstract-2">Abstract</h3>
<p>The increasing role of data analytics in marketing underscores the importance of teaching marketing analytics in higher education. Nonetheless, offering feedback on students' open-ended analytics tasks is labor-intensive and expensive. This study introduces a web application leveraging generative Artificial Intelligence (AI) to autonomously provide feedback on exercises requiring coding, statistics, mathematics, and economic reasoning. We compare the application's feedback with human expert feedback for 510 student responses across various exercise complexities and four application configurations. Our results show that the application using GPT-4 with the correct solution provides nearly unbiased and reasonably accurate evaluations. Specifically, it has a mean error of ‑1.6 points on a 90-point exercise and a mean absolute error of 7.2 points (8&nbsp;% of total achievable points). While GPT-4 outperforms GPT-3.5 by 26&nbsp;%, it costs over ten times more. Compared to AI models, human evaluators are the most accurate but are about 170 times costlier than GPT-3.5, 15 times pricier than GPT-4, and require at least 20 times the evaluation duration. While we test the web application in a marketing analytics context, the application does not feature any subject-specific elements beyond the user-supplied exercise and (optionally) a correct solution. Hence, the application is ready to use in other domains beyond marketing analytics.</p>
</section>
</section>
<section id="degrees-of-vertical-integration-on-online-retail-platforms-an-international-comparison-of-amazon-marketplaces" class="level2">
<h2 class="anchored" data-anchor-id="degrees-of-vertical-integration-on-online-retail-platforms-an-international-comparison-of-amazon-marketplaces">Degrees of Vertical Integration on Online Retail Platforms: An International Comparison of Amazon Marketplaces</h2>
<p><em>Authors:</em> Lukas Jürgensmeier, Jan Bischoff, and <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a></p>
<p><em>Status:</em> In progress, initial draft of working paper estimated March 2024.</p>
</section>
</section>
<section id="other-projects" class="level1">
<h1>Other Projects</h1>
<section id="teaching-marketing-analytics-a-pricing-exercise-for-quantitative-and-substantive-marketing-skills" class="level2">
<h2 class="anchored" data-anchor-id="teaching-marketing-analytics-a-pricing-exercise-for-quantitative-and-substantive-marketing-skills">Teaching Marketing Analytics: A Pricing Exercise for Quantitative and Substantive Marketing Skills</h2>
<p><em>Authors:</em> <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a> and Lukas Jürgensmeier</p>
<p>This article describes a data-driven exercise for teaching and assessing students' skills in marketing analytics, specifically in pricing. This exercise combines teaching econometrics to analyze data and substantive marketing to derive managerial insights. The econometric challenge requires students to set up and implement a regression analysis to derive the demand function, detect multicollinearity, and select appropriate data visualizations. The substantive challenge requires deriving optimal pricing decisions and understanding how the parameters of the demand function impact optimal prices and the associated profit. The exercise serves as a case study for in-class discussion, an assignment, or an in-class or take-home exam to assess students' skills. Under a liberal CC BY license and free of charge, we encourage other educators to use the exercise in their teaching. Beyond the exercise, we provide the necessary data and a sample solution using the statistical programming language R.</p>
<p><strong>Keywords:</strong> Marketing Analytics, Pricing, Teaching, Exercise, Case Study, Data Science</p>
<p><em>Status:</em> Under Review at the Journal of Marketing Analytics (Special Issue on “Marketing Analytics in Academia: Exploring Effective Pedagogy”.)</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>