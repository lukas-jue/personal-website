<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lukas Jürgensmeier - Research</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SRCXLB0QJK"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SRCXLB0QJK', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Lukas Jürgensmeier">
<meta property="og:description" content="Lukas Jürgensmeier is a Ph.D.&nbsp;Student and Research Assistant in Quantitative Marketing at Goethe University Frankfurt. His research focuses on the interface between Data Science and Marketing. Lukas applies modern econometric methods to novel data sources in the digital economy—especially with the R programming language.">
<meta property="og:site-name" content="Lukas Jürgensmeier">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Lukas Jürgensmeier</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./research.html" rel="" target="" aria-current="page">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./curriculum-vitae.html" rel="" target="">
 <span class="menu-text">Curriculum Vitae</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./techacademy.html" rel="" target="">
 <span class="menu-text">TechAcademy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contact.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#publications" id="toc-publications" class="nav-link active" data-scroll-target="#publications">Publications</a>
  <ul class="collapse">
  <li><a href="#do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations" id="toc-do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations" class="nav-link" data-scroll-target="#do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations">Do Political Conflicts Influence Daily Consumption Choices? Evidence from US-China Relations</a>
  <ul class="collapse">
  <li><a href="#abstract" id="toc-abstract" class="nav-link" data-scroll-target="#abstract">Abstract</a></li>
  </ul></li>
  <li><a href="#generative-ai-for-scalable-feedback-to-multimodal-exercises-in-marketing-analytics" id="toc-generative-ai-for-scalable-feedback-to-multimodal-exercises-in-marketing-analytics" class="nav-link" data-scroll-target="#generative-ai-for-scalable-feedback-to-multimodal-exercises-in-marketing-analytics">Generative AI for Scalable Feedback to Multimodal Exercises in Marketing Analytics</a>
  <ul class="collapse">
  <li><a href="#abstract-1" id="toc-abstract-1" class="nav-link" data-scroll-target="#abstract-1">Abstract</a></li>
  </ul></li>
  <li><a href="#teaching-marketing-analytics-a-pricing-case-study-for-quantitative-and-substantive-marketing-skills" id="toc-teaching-marketing-analytics-a-pricing-case-study-for-quantitative-and-substantive-marketing-skills" class="nav-link" data-scroll-target="#teaching-marketing-analytics-a-pricing-case-study-for-quantitative-and-substantive-marketing-skills">Teaching Marketing Analytics: A Pricing Case Study for Quantitative and Substantive Marketing Skills</a></li>
  </ul></li>
  <li><a href="#working-papers" id="toc-working-papers" class="nav-link" data-scroll-target="#working-papers">Working Papers</a>
  <ul class="collapse">
  <li><a href="#measuring-self-preferencing-on-digital-platforms" id="toc-measuring-self-preferencing-on-digital-platforms" class="nav-link" data-scroll-target="#measuring-self-preferencing-on-digital-platforms">Measuring Self-Preferencing on Digital Platforms</a>
  <ul class="collapse">
  <li><a href="#abstract-2" id="toc-abstract-2" class="nav-link" data-scroll-target="#abstract-2">Abstract</a></li>
  </ul></li>
  <li><a href="#opportunities-for-self-preferencing-on-international-online-marketplaces" id="toc-opportunities-for-self-preferencing-on-international-online-marketplaces" class="nav-link" data-scroll-target="#opportunities-for-self-preferencing-on-international-online-marketplaces">Opportunities for Self-Preferencing on International Online Marketplaces</a>
  <ul class="collapse">
  <li><a href="#abstract-3" id="toc-abstract-3" class="nav-link" data-scroll-target="#abstract-3">Abstract</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/lukas-jue/personal-website/edit/main/research.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/lukas-jue/personal-website/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Research</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>My research investigates economic phenomena in the digital economy. I do so using novel big data sources and applying modern statistical methods.</p>
<p>On this site, you will find a summary of my current research projects, grouped by <a href="./research.html#publications">publications</a> and <a href="./research.html#working-papers">working papers</a>.</p>
<section id="publications" class="level1">
<h1>Publications</h1>
<section id="do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations" class="level2">
<h2 class="anchored" data-anchor-id="do-political-conflicts-influence-daily-consumption-choices-evidence-from-us-china-relations">Do Political Conflicts Influence Daily Consumption Choices? Evidence from US-China Relations</h2>
<p><em>Authors:</em> <a href="https://www.celinaproffen.com/">Celina Proffen</a> and Lukas Jürgensmeier (equal co-authorship).</p>
<p>Proffen, Celina and Jürgensmeier, Lukas (2024), “Do political conflicts influence daily consumption choices? Evidence from US-China relations,” Journal of Economic Behavior &amp; Organization, 220, pp.&nbsp;660-674, <a href="https://doi.org/10.1016/j.jebo.2024.02.031">https://doi.org/10.1016/j.jebo.2024.02.031</a>.</p>
<section id="abstract" class="level3">
<h3 class="anchored" data-anchor-id="abstract">Abstract</h3>
<p>Does political conflict with another country influence domestic consumers’ daily consumption choices? We exploit the volatile US-China relations in 2018 and 2019 to analyze whether US consumers reduce their visits to Chinese restaurants when bilateral relations deteriorate. We measure the degree of political conflict through negativity in media reports and rely on smartphone location data to measure daily visits to over 190,000 US restaurants. A deterioration in US-China relations induces a significant decline in visits not only to Chinese but also to other foreign ethnic restaurants, while visits to typical American restaurants increase. We identify consumers’ age, race, and cultural openness to moderate the strength of this ethnocentric effect.</p>
<p><strong>Keywords:</strong> Political conflict, Consumption, Boycotts, Ethnocentrism</p>
</section>
</section>
<section id="generative-ai-for-scalable-feedback-to-multimodal-exercises-in-marketing-analytics" class="level2">
<h2 class="anchored" data-anchor-id="generative-ai-for-scalable-feedback-to-multimodal-exercises-in-marketing-analytics">Generative AI for Scalable Feedback to Multimodal Exercises in Marketing Analytics</h2>
<p><em>Authors:</em> Lukas Jürgensmeier and <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a>.</p>
<p><em>Status:</em> Conditionally accepted at International Journal of Research in Marketing.</p>
<p>Read the full working paper on <a href="https://papers.ssrn.com/abstract_id=4683869">SSRN</a>.</p>
<section id="abstract-1" class="level3">
<h3 class="anchored" data-anchor-id="abstract-1">Abstract</h3>
<p>Detailed feedback on exercises helps learners become proficient in marketing analytics. However, such feedback is labor-intensive and expensive for educators. This manuscript introduces a web app leveraging Generative Artificial Intelligence (AI) that automatically provides feedback on complex multimodal exercises requiring coding, statistics, and economic reasoning. The authors evaluate the performance by comparing the app's quantitative feedback (i.e., points achieved) with human expert feedback for 4,349 solutions of marketing analytics exercises. The results show that the app (using GPT-4) provides almost unbiased evaluations, correlates very highly with (r = .94), and deviates only 6 % from human evaluations. Experts rate the app's qualitative performance by examining its textual feedback, indicating that it is mostly correct, sufficient, and appropriate for learners. Survey responses show that learners highly recommend the app and that the automated feedback adds value beyond traditional feedback methods. An advantage of the app is its subject-agnosticism: because it does not require any subject- or exercise-specific design, it is ready-to-use for new exercises in marketing analytics and other subjects.</p>
<p><strong>Keywords:</strong> Generative AI, Automated Feedback, App, Marketing Analytics, Learning.</p>
</section>
</section>
<section id="teaching-marketing-analytics-a-pricing-case-study-for-quantitative-and-substantive-marketing-skills" class="level2">
<h2 class="anchored" data-anchor-id="teaching-marketing-analytics-a-pricing-case-study-for-quantitative-and-substantive-marketing-skills">Teaching Marketing Analytics: A Pricing Case Study for Quantitative and Substantive Marketing Skills</h2>
<p><em>Authors:</em> <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a> and Lukas Jürgensmeier.</p>
<p>Skiera, Bernd and Jürgensmeier, Lukas (2024), “Teaching Marketing Analytics: A Pricing Case Study for Quantitative and Substantive Marketing Skills,” Journal of Marketing Analytics (forthcoming).</p>
<p>This article describes a data-driven case study for teaching and assessing students’ skills in marketing analytics, specifically in pricing. This case study combines teaching econometrics to analyze data and substantive marketing to derive managerial insights. The econometric challenge requires students to set up and implement a regression analysis to derive the demand function, detect multicollinearity, and select appropriate data visualizations. The substantive challenge requires deriving optimal pricing decisions and understanding how the parameters of the demand function impact optimal prices and the associated profit. We test the case study in a marketing analytics exam and discuss the performance of 134 students. Beyond assessing student performance in an exam, the case study facilitates teaching through in-class group work or assignments. Free of charge, under a liberal CC BY license, we encourage other educators to use the case study in their teaching. We provide the necessary data and a sample solution using the statistical programming language R.</p>
<p><strong>Keywords:</strong> Marketing Analytics, Pricing, Teaching, Education, Case Study, Data Science</p>
</section>
</section>
<section id="working-papers" class="level1">
<h1>Working Papers</h1>
<section id="measuring-self-preferencing-on-digital-platforms" class="level2">
<h2 class="anchored" data-anchor-id="measuring-self-preferencing-on-digital-platforms">Measuring Self-Preferencing on Digital Platforms</h2>
<p><em>Authors:</em> Lukas Jürgensmeier and <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a>.</p>
<p><em>Status:</em> Under third-round review at the Journal of Marketing.</p>
<p>Read the full working paper on <a href="https://papers.ssrn.com/abstract_id=4393726">SSRN</a>.</p>
<section id="abstract-2" class="level3">
<h3 class="anchored" data-anchor-id="abstract-2">Abstract</h3>
<p>Digital platforms use recommendations to facilitate exchanges between platform actors, such as trade between buyers and sellers. Aiming to protect consumers and guarantee fair competition on platforms, legislators increasingly require that recommendations on market-dominating platforms be free from self-preferencing. That is, platforms that also act as sellers (e.g., Amazon) or information providers (e.g., Google) must not prefer their own offers over comparable third-party offers. Yet, successful enforcement of self-preferencing bans—to the potential benefit of consumers and third-party actors—requires defining and measuring self-preferencing across a platform. In the context of recommendations through search results, this research contributes by i) conceptualizing a “recommendation” as an offer’s level of search engine visibility across an entire platform (instead of its position in specific search queries, as in previous research); ii) discussing two tests for self-preferencing, and iii) implementing them in two empirical studies across three international Amazon marketplaces. Contrary to consumer expectations and emerging literature, our analysis finds almost no evidence for self-preferencing. A survey reveals that even if Amazon were proven to engage in self-preferencing, most consumers would not change their shopping behavior on the platform—highlighting Amazon’s significant market power and suggesting the need for robust protections for sellers and consumers.</p>
<p><strong>Keywords:</strong> Digital Platforms, Amazon, Competition, Antitrust, Search Engines, Digital Markets Act, American Innovation and Choice Online Act.</p>
</section>
</section>
<section id="opportunities-for-self-preferencing-on-international-online-marketplaces" class="level2">
<h2 class="anchored" data-anchor-id="opportunities-for-self-preferencing-on-international-online-marketplaces">Opportunities for Self-Preferencing on International Online Marketplaces</h2>
<p><em>Authors:</em> Lukas Jürgensmeier, Jan Bischoff, and <a href="https://www.marketing.uni-frankfurt.de/abteilungen/marketing/professoren/skiera/prof-dr-bernd-skiera.html">Bernd Skiera</a>.</p>
<p><em>Status:</em> Under review at the International Marketing Review. Working paper available upon request.</p>
<section id="abstract-3" class="level3">
<h3 class="anchored" data-anchor-id="abstract-3">Abstract</h3>
<p>Large digital platforms face intense scrutiny over self-preferencing, which involves a platform provider preferring its own offers over competitors. On online marketplaces, also called retail or e-commerce platforms, much of the academic and regulatory debate focuses on detecting whether the marketplace provider prefers its own private labels, such as “Amazon Basics” or Walmart’s “Great Value” products. However, we outline, conceptually and empirically, that self-preferencing can also occur through other dimensions of vertical integration, namely, retailing and fulfillment. This article contributes by conceptualizing three dimensions of vertical integration on online marketplaces—private labels, retailing, and fulfillment, and describes which international marketplaces vertically integrate to which extent in two empirical studies. First, we show empirically that the majority of the 20 most-visited global online marketplaces vertically integrate in all three dimensions, implying ample opportunities for self-preferencing. Second, we analyze around 600 million offers on eleven international Amazon marketplaces to measure vertical integration in each dimension, i.e., for which share of offers self-preferencing could occur. Only 0.02% of all offers consists of an Amazon private label product, but Amazon is a retailer for around 31% and fulfills around 38% of all available offers on its marketplaces. While the self-preferencing debate often focuses on private-label products, we are the first to present large-scale empirical results showing that self-preferencing on Amazon could occur most often through retailing and fulfillment because it affects much larger shares of offers. We are also the first to measure these shares’ variation across countries and to relate them to regulatory environments.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>